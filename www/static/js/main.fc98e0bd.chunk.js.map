{"version":3,"sources":["store/index.js","components/Header/Header.js","components/Loading/Loading.js","components/Tabs/Tabs.js","App.js","index.js"],"names":["initialState","message","websocket","WebSocket","messageAction","value","type","websocketSelector","state","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","action","applyMiddleware","Header","props","this","title","hasback","hasmore","backDom","className","onClick","backAction","bind","moreDom","moreAction","history","goBack","React","Component","Loading","tabsData","id","icon","path","Tabs","map","item","key","to","Startup","lazy","Login","Regiester","Mine","Modified","User","Add","Detail","Message","Moments","NotFind","Chat","App","dispatch","useDispatch","useSelector","console","log","onmessage","ev","data","JSON","parse","status","onclose","onerror","fallback","component","exact","render","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.fc98e0bd.chunk.js","sourcesContent":["// redux该怎么写就怎么写\r\nimport {createStore, compose, applyMiddleware} from 'redux'\r\n// import {createSelector} from 'reselect'\r\n\r\n// types\r\nconst WEBSOCKET = 'websocket';\r\nconst MESSAGE = 'message';\r\n\r\n\r\n// state初始数据\r\nconst initialState = {\r\n   message: [],\r\n   websocket: new WebSocket(\"ws://47.95.10.84:3000\")||{}\r\n}\r\n\r\n\r\n// 操作state的reducer\r\nconst reudcer = ( state = initialState, action )=>{\r\n  switch (action.type) {\r\n    case WEBSOCKET:\r\n      return {\r\n        ...state,\r\n        websocket: {...action.value}\r\n      };\r\n    case MESSAGE:\r\n      return {\r\n        ...state,\r\n        message:[...state.message,action.value]\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\n\r\n// actions\r\nexport const websocketAction = (value)=>({\r\n  type: WEBSOCKET,\r\n  value\r\n})\r\nexport const messageAction = (value)=>({\r\n  type: MESSAGE,\r\n  value\r\n})\r\n\r\n\r\n\r\n// selector\r\nexport const messageSelector = state => {\r\n  return state.message;\r\n};\r\n\r\n\r\nexport const websocketSelector = state => {\r\n  return state.websocket;\r\n};\r\n\r\n\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nconst store = createStore(reudcer, composeEnhancers(applyMiddleware()));\r\n\r\nexport default store;\r\n","import React from 'react';\r\nimport './style.scss'\r\n\r\nclass Header extends React.Component {\r\nconstructor(props) {\r\n    super(props);\r\n    // console.log(props);\r\n    this.state = {\r\n    };\r\n}\r\n\r\n    render() {\r\n        let {title='',hasback=true,hasmore=false}=this.props;\r\n        let backDom=<i className=\"iconfont icon-fanhui iconback\" onClick={this.backAction.bind(this)}></i>;\r\n        let moreDom=<i className=\"iconfont icon-gengduo iconmore\" onClick={\r\n            ()=>{this.props.moreAction()}\r\n        } ></i>;\r\n        return <div className=\"header\">\r\n               {hasback&&backDom}\r\n                <h2>{title}</h2>\r\n               {hasmore&&moreDom}\r\n        </div>;\r\n    }\r\n\r\n\r\n    backAction(){\r\n        this.props.history.goBack();\r\n    }\r\n}\r\n\r\n\r\nexport default Header;","import React from 'react';\r\n\r\nexport default class Loading extends React.Component {\r\nconstructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n    };\r\n}\r\n\r\n    render() {\r\n        return <div></div>;\r\n    }\r\n}\r\n\r\n\r\n\r\n","import React from 'react';\r\nimport {NavLink} from 'react-router-dom'\r\nimport './style.scss'\r\n\r\n\r\nconst tabsData=[\r\n    {id: 1, title: '信息', icon: 'iconfont icon-xiaoxi', path: '/message'},\r\n    {id: 2, title: '朋友', icon: 'iconfont icon-pengyou', path: '/user'},\r\n    {id: 3, title: '圈子', icon: 'iconfont icon-pengyouquan-copy', path: '/moments'},\r\n    {id: 4, title: '我的', icon: 'iconfont icon-wode', path: '/mine'},\r\n]\r\n\r\nclass Tabs extends React.Component {\r\nconstructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n    };\r\n}\r\n    render() {\r\n        return (\r\n            <nav className=\"app-tabs\">\r\n            {\r\n              tabsData.map(item=>(\r\n                <NavLink className=\"tab\" key={item.id} to={item.path}>\r\n                  <span className={item.icon}></span>\r\n                  <span className=\"text\">{item.title}</span>\r\n                </NavLink>\r\n              ))\r\n            }\r\n\r\n\r\n            <div className=\"voice\">\r\n                <i className=\"iconfont icon-yuyin\"></i>\r\n            </div>\r\n            </nav>\r\n\r\n\r\n          )\r\n    }\r\n}\r\n\r\nexport default Tabs;","import \"./style/reset.scss\";\nimport \"./style/index.scss\";\nimport React, { lazy, Suspense } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { messageAction } from \"./store\";\nimport {\n  BrowserRouter as Router,\n  Route,\n  Redirect,\n  Switch\n} from \"react-router-dom\";\nimport Loading from \"./components/Loading/Loading\";\nimport Tabs from \"./components/Tabs/Tabs\";\nimport Header from \"./components/Header/Header\";\nimport { websocketSelector } from \"./store\";\n\nconst Startup = lazy(() => import(\"./pages/startup/startup\"));\n\nconst Login = lazy(() => import(\"mine/login/login\"));\nconst Regiester = lazy(() => import(\"mine/regiester/regiester\"));\nconst Mine = lazy(() => import(\"mine/mine/mine\"));\nconst Modified = lazy(() => import(\"mine/modified/modified\"));\n\nconst User = lazy(() => import(\"user/user/user\"));\n\nconst Add = lazy(() => import(\"user/add/add\"));\nconst Detail = lazy(() => import(\"user/detail/detail\"));\n\nconst Message = lazy(() => import(\"message/message/message\"));\n\nconst Moments = lazy(() => import(\"moments/moments/moments\"));\n\nconst NotFind = lazy(() => import(\"common/not-find/not-find\"));\nconst Chat = lazy(() => import(\"common/chat/chat\"));\n\nconst App = props => {\n  const dispatch = useDispatch();\n  const websocket = useSelector(websocketSelector);\n\n  console.log(websocket);\n  websocket.onmessage = ev => {\n    let data = JSON.parse(ev.data);\n\n    if (data.status === \"ok\") {\n      //是你自己发送的，发送成功了\n    } else {\n      console.log(data);\n      dispatch(messageAction(data));\n    }\n  };\n\n  websocket.onclose=ev=>{\n    console.log('断开连接');\n  }\n  websocket.onerror=ev=>{\n    console.log(ev);\n  }\n\n  return (\n    <Router>\n      <Suspense fallback={<Loading />}>\n        {/* <Provider store={store}> */}\n        <Header />\n\n        {\n          <div>\n            {/* 根页面 */}\n            <Switch>\n              <Route path=\"/startup\" component={Startup} />\n              <Route\n                path=\"/\"\n                exact\n                render={() => {\n                  return <Redirect to=\"/startup\" />;\n                }}\n              />\n              <Route path=\"/user\" component={User}></Route>\n              <Route path=\"/message\" component={Message} />\n              <Route path=\"/moments\" component={Moments} />\n              <Route path=\"/mine\" component={Mine} />\n              <Route path=\"/regiester\" component={Regiester} />\n              <Route path=\"/login\" component={Login} />\n\n              {/* 公共页面 */}\n              <Route path=\"/Chat/:userId\" component={Chat} />\n              <Route component={NotFind} />\n            </Switch>\n            {/* 子页面 */}\n            <>\n              <Route path=\"/user/add\" component={Add} />\n              <Route path=\"/user/add/detail/:id\" component={Detail} />\n              <Route path=\"/Chat/detail/:id\" component={Detail} />\n              <Route path=\"/mine/modified\" component={Modified} />\n            </>\n          </div>\n        }\n\n        <Tabs />\n        {/* </Provider> */}\n      </Suspense>\n    </Router>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport {Provider} from 'react-redux'\nimport store from './store'\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>, \n  document.getElementById('root')\n);\n"],"sourceRoot":""}